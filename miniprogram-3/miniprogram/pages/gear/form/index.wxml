<view class="container">
  
  <view class="form-title">录入详情 · {{typeMeta[type].label}}</view>

  <view class="group-title">基本信息</view>
  <view class="card">
    <view class="form-item">
      <text class="label">品牌</text>
      <picker bindchange="bindPickerChange" data-field="brand" data-options="{{brands}}" value="{{brandIndex}}" range="{{brands}}">
        <view class="picker-val {{brandIndex!=null?'':'placeholder'}}">
          {{brandIndex!=null ? brands[brandIndex] : '请选择'}} 
          <text style="color:#ccc; font-size:24rpx; margin-left:10rpx;">▼</text>
        </view>
      </picker>
    </view>
    <view class="form-item">
      <text class="label">系列名</text>
      <input class="input-box" placeholder="如 佐大师" placeholder-style="color:#ccc; font-weight:normal" data-field="series" value="{{formData.series}}" bindinput="handleInput" />
    </view>
    <view class="form-item">
      <text class="label">具体规格</text>
      <input class="input-box" placeholder="如 1610M" placeholder-style="color:#ccc; font-weight:normal" data-field="model_sku" value="{{formData.model_sku}}" bindinput="handleInput" />
    </view>
  </view>

  <view class="group-title">核心参数</view>
  <view class="card">
    <block wx:for="{{typeMeta[type].params}}" wx:key="key">
      <view class="form-item">
        <text class="label">{{item.label}}</text>
        
        <input wx:if="{{item.type === 'digit' || item.type === 'text' || item.type === 'number'}}"
               class="input-box" 
               type="{{item.type === 'number' ? 'number' : item.type === 'digit' ? 'digit' : 'text'}}"
               placeholder="{{item.placeholder}}" 
               placeholder-style="color:#ccc; font-weight:normal; font-size:28rpx;"
               data-field="{{item.key}}" 
               data-isspec="true"
               value="{{formData.specs[item.key]}}" 
               bindinput="handleInput" />
               
        <picker wx:if="{{item.type === 'picker'}}"
                bindchange="bindPickerChange"
                data-field="{{item.key}}"
                data-isspec="true"
                data-options="{{item.options}}"
                range="{{item.options}}">
           <view class="picker-val {{formData.specs[item.key]?'':'placeholder'}}">
             {{formData.specs[item.key] || '请选择'}} 
             <text style="color:#ccc; font-size:24rpx; margin-left:10rpx;">▼</text>
           </view>
        </picker>

        <text class="unit" wx:if="{{item.unit}}">{{item.unit}}</text>
      </view>
    </block>
  </view>

  <view class="group-title">资产档案</view>
  <view class="card">
    <view class="form-item">
      <text class="label">入手价格</text>
      <input class="input-box" type="digit" placeholder="0.00" placeholder-style="color:#ccc; font-weight:normal" data-field="price" value="{{formData.price}}" bindinput="handleInput" />
      <text class="unit">元</text>
    </view>
  </view>

  <view class="card share-card" wx:if="{{!isFromGlobal}}">
    <view class="share-row">
      <view>
        <view class="share-title">⚡ 贡献到知渔装备参数公共库</view>
        <view class="share-desc">勾选后将生成 69 码索引和关键词，可以帮助其他钓友快速录入。
        【该条目由钓友***录入，已方便N个钓友录入】
        【钓友***使用了**装备参数，由您录入的该参数已便利N位钓友，谢谢！】</view>
      </view>
      <switch color="#1976D2" checked="{{shareToPublic}}" bindchange="onShareChange" style="transform: scale(0.8);"/>
    </view>
  </view>

  <view class="footer">
    <button class="btn-save" bindtap="handleSave">保存并归档</button>
  </view>
</view>